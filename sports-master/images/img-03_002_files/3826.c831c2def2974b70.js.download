(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3826],{36293:function(e,t,o){"use strict";o.d(t,{wO:function(){return i}});let i=e=>{let t=e=>encodeURIComponent(e);return Object.keys(e).reduce((o,i)=>{let l=e[String(i)];if(null==l)return o;i=t(i);let r=0===o.length?"?":"&";if(Array.isArray(l)){let e=l.map((e,o)=>"".concat(0===o?r:"&").concat(i,"=").concat(t(e))).join("");return[o,e].join("")}if("string"!=typeof l&&"number"!=typeof l&&"boolean"!=typeof l)return o;{let e=t(l);return[o,r,i,"=",e].join("")}},"")}},4373:function(e,t,o){"use strict";o.d(t,{v:function(){return r}});var i=o(16966),l=o(23337);let r=async(e,t)=>{if(e)try{let r=await fetch("/api/edgecast-markers".concat((0,i.wO)({guid:e})),{signal:t});if(r.ok){var o;return null===(o=await r.json())||void 0===o?void 0:o.data}l.k.error("Error:[/api/edgecastMarkers]: ".concat(r.statusText),{statusCode:r.status});return}catch(t){l.k.error("Did not successfully call get Agenda endpoint",{err:t,guid:e});return}}},85855:function(e,t,o){"use strict";o.d(t,{b:function(){return l}});var i=o(95916);let l=e=>{var t,o,l;let r;if(e.aspectRatioWidth&&""!==e.aspectRatioWidth&&e.aspectRatioHeight&&""!==e.aspectRatioHeight){let t=parseInt(e.aspectRatioWidth),o=parseInt(e.aspectRatioHeight);o&&t&&(r={height:o,width:t})}return{src:null==e?void 0:e.src,alt:null==e?void 0:e.alt,aspectRatio:r,className:null!==(t=null==e?void 0:e.className)&&void 0!==t?t:void 0,eagerLoading:!!(null==e?void 0:e.isEager),height:(null==e?void 0:e.height)?+e.height:void 0,width:(null==e?void 0:e.width)?+e.width:void 0,cropMode:(null==e?void 0:e.cropMode)?i.S[null==e?void 0:e.cropMode]:void 0,colorize:(null==e?void 0:e.colorize)?{hex:null!==(o=e.colorize.hex)&&void 0!==o?o:void 0,opacity:null!==(l=e.colorize.opacity)&&void 0!==l?l:void 0}:void 0,title:null==e?void 0:e.title}}},78829:function(e,t,o){"use strict";var i,l,r,a,n,u;o.d(t,{GB:function(){return i},n6:function(){return l},n8:function(){return r}}),(a=i||(i={})).START="Start",a.END="End",a.BREAK="Break",(n=l||(l={})).VIDEO_EVENTS="VideoEvents",n.AGENDA="Agenda",(u=r||(r={})).Pre="pre",u.Live="live",u.Post="post",u.Complete="complete"},23826:function(e,t,o){"use strict";o.r(t),o.d(t,{HeroLiveStreamWrapper:function(){return H}});var i=o(85893),l=o(57578),r=o(99656),a=o(53511),n=o(97462),u=o(11163),s=o(67294),d=o(94184),v=o.n(d),c=o(23855),m=o(59536),g=o(4373);let f=()=>new Date().getTime()/1e3;var p=o(64343),h=o(4805),S=o(85855),b=o(78829),T=o(36293),k=o(23337);let E=async e=>{let{id:t,locale:o}=e,i=await fetch("/api/get-live-stream-status".concat((0,T.wO)({id:t,locale:o})));return i.ok?await i.json():(k.k.warn("[/api/get-live-stream-status]: ".concat(i.statusText),{statusCode:i.status}),null)},C=(e,t)=>{let o=(0,s.useRef)(e);(0,s.useEffect)(()=>{o.current=e},[e]),(0,s.useEffect)(()=>{if(null===t)return;let e=setInterval(()=>o.current(),t);return()=>clearInterval(e)},[t])},L=e=>{let{fetch:t,params:o,intervalInMs:i,enabled:l=!0}=e,[r,a]=(0,s.useState)(void 0),n=(0,s.useRef)(null),u=JSON.stringify(o),d=(0,s.useCallback)(async()=>{if(!n.current){n.current=t(o);try{a(await n.current)}finally{n.current=null}}},[t,u]);return C(d,l?i:null),(0,s.useEffect)(()=>{if(l)return d(),()=>{n.current=null,a(void 0)}},[l,d]),r},y=e=>{let{liveStreamId:t,enabled:o}=e,{locale:i="en"}=(0,u.useRouter)(),l=L({fetch:E,params:{id:t,locale:i},enabled:o,intervalInMs:1e4});return l?{fallbackMessage:l}:{}};var x=o(82012);let A=(e,t,o)=>(e-t)*100/(o-t);var B=o(51248),w=o.n(B);let R=e=>{var t,o,i,l,r,a,n,d,T,k,E,C,L,B,R,_,H,N,I,j,M,O,V,D,G,W,P,z,K,Z;let{locale:U,asPath:J}=(0,u.useRouter)(),Q=(0,s.useMemo)(()=>(0,x.A)(window.location.pathname),[J]),q=(0,s.useMemo)(()=>(0,c.Z)(null!==(H=e.countdownTime)&&void 0!==H?H:""),[e.countdownTime]),F=(0,s.useMemo)(()=>(0,c.Z)(null!==(N=e.start)&&void 0!==N?N:""),[e.start]),[X,Y]=(0,s.useState)([]),[$,ee]=(0,s.useState)(0),[et,eo]=(0,s.useState)(),[ei,el]=(0,s.useState)(),[er,ea]=(0,s.useState)(!1),[en,eu]=(0,s.useState)(),[es,ed]=(0,s.useState)(),[ev,ec]=(0,s.useState)([]),[em,eg]=(0,s.useState)();(0,s.useEffect)(()=>{el({videoTag:"",videoTitle:e.title,videoDate:""})},[e.title]);let ef=(0,s.useCallback)(()=>{ee(e=>e+1)},[]),{fallbackMessage:ep}=y({liveStreamId:e.liveStream.id,enabled:!et}),eh=(0,s.useCallback)(e=>{var t;if(!e)return;let o=null===(t=e.markers)||void 0===t?void 0:t.reduce((e,t)=>(t.type===b.n6.VIDEO_EVENTS&&e.push(t),e),[]);e.assets&&(null==o||o.forEach(t=>{switch(t.tag){case b.GB.START:e.actual_start=t.ts;break;case b.GB.END:e.actual_stop=t.ts}})),!et&&e.state===b.n8.Complete&&e.assets&&eo(e.assets),e.actual_stop&&(e.actual_stop=e.actual_stop/1e3,ed(e.actual_stop)),e.actual_start&&(e.actual_start=e.actual_start/1e3,eu(e.actual_start),Y(e.markers)),ea(!0)},[et]);(0,s.useEffect)(()=>{var t,o,i,l,r,a,n,u;if(et||$>=3)return;let s=(null===(o=e.liveStream)||void 0===o?void 0:null===(t=o.source)||void 0===t?void 0:t.sources)&&"object"==typeof(null===(l=e.liveStream)||void 0===l?void 0:null===(i=l.source)||void 0===i?void 0:i.sources)&&"id"in(null===(a=e.liveStream)||void 0===a?void 0:null===(r=a.source)||void 0===r?void 0:r.sources)?null===(u=e.liveStream)||void 0===u?void 0:null===(n=u.source)||void 0===n?void 0:n.sources.id:void 0;if(!s||!Array.isArray(s))return;let[d]=s,v=async()=>{try{let e=await (0,g.v)(d);e?(eh(e),ee(0)):ee(e=>e+1)}catch(e){ee(e=>e+1)}};v();let c=setInterval(v,5e3);return()=>{clearInterval(c)}},[$,null===(o=e.liveStream)||void 0===o?void 0:null===(t=o.source)||void 0===t?void 0:t.sources,eh,et]);let eS=(0,s.useCallback)((t,o,i)=>{var l;let r=o||f()-p.EV,a=null==i?void 0:i.filter(e=>e.type===b.n6.AGENDA||e.type===b.n6.VIDEO_EVENTS&&e.tag===b.GB.BREAK);if(!a||a.length<0)return;let n=0,u=null!==(l=e.agenda)&&void 0!==l?l:[],s=a.reduce((o,i,l)=>{var s,d;let v=i.ts/1e3;if(0===l){let i=A(v,t,r);i>2&&o.push({id:"-1",name:null===(d=e.videoLabels)||void 0===d?void 0:d.start,chapterEndAt:i,chapterStartAt:0})}return i.tag===b.GB.BREAK&&n--,o.push({id:l.toString(),name:u.length>l+n&&i.tag!==b.GB.BREAK?u[l+n].title:i.tag===b.GB.BREAK?null===(s=e.videoLabels)||void 0===s?void 0:s.break:i.tag,chapterEndAt:l===a.length-1?100:A(a[l+1].ts/1e3,t,r),chapterStartAt:A(v,t,r)}),o},[]);ec(s)},[e.agenda,null===(i=e.videoLabels)||void 0===i?void 0:i.break,null===(l=e.videoLabels)||void 0===l?void 0:l.start]);(0,s.useEffect)(()=>{let e=setInterval(()=>{X&&en&&eS(en,es,X)},1e3);return()=>{clearInterval(e)}},[eS,X,es,en]);let eb=(0,s.useMemo)(()=>null==X?void 0:X.filter(e=>e.type===b.n6.AGENDA),[X]),eT=(0,s.useCallback)(e=>{if(!en||!e)return null;en&&e&&eg({ts:et?en&&e?e-en:-1:e,vodReady:null!=et?et:void 0})},[et,en]),ek=(0,s.useMemo)(()=>{var t;if(U||!e.liveLangResources)return;let o=Object.values(e.liveLangResources);return null===(t=o.find(e=>e.identifier==="livestream-languages.".concat(U)))||void 0===t?void 0:t.external},[U,e.liveLangResources]);return{fcdsHeroLiveStreamProps:{title:e.title,description:null!==(I=e.description)&&void 0!==I?I:void 0,roofLine:null!==(j=e.roofLine)&&void 0!==j?j:void 0,countDownDateTime:q,streamStartDateTime:F,dateLabels:e.dateLabels,thumbnail:e.thumbnail?(0,h.d)(e.thumbnail,e.themes):void 0,logo:e.logo?(0,S.b)(e.logo):void 0,agendaLink:Q,agendaLinkText:null!==(M=e.linkText)&&void 0!==M?M:void 0,agendaPoints:e.agenda||[],agendaTitle:null!==(O=e.agendaTitle)&&void 0!==O?O:void 0,agendaTheme:m.C.Light,markers:eb,videoLabels:e.videoLabels,ctaLink:null!==(V=e.ctaLink)&&void 0!==V?V:void 0,fullScreen:e.fullScreen,introText:null!==(D=e.introText)&&void 0!==D?D:void 0,onClickAgendaItem:eT,className:v()({"fcds-lightest-grey":!e.isLiveBlogHero}),streamContainerClassName:v()({[w().liveBlogHeroStreamContainer]:e.isLiveBlogHero}),streamWrapperClassName:e.isLiveBlogHero?w().liveBlogHeroStreamWrapper:void 0,isAgendaBeforeStreamVisible:!e.isLiveBlogHero,isOverlayVisible:$>=3,onStreamStatusChanged:e.handleLiveStreamStart,theme:{backgroundColor:null!==(G=null===(a=e.themes)||void 0===a?void 0:null===(r=a.colorTheme)||void 0===r?void 0:r.backgroundColor)&&void 0!==G?G:void 0,textColor:null!==(W=null===(d=e.themes)||void 0===d?void 0:null===(n=d.colorTheme)||void 0===n?void 0:n.textColor)&&void 0!==W?W:void 0,buttonBackgroundColor:null!==(P=null===(k=e.themes)||void 0===k?void 0:null===(T=k.colorTheme)||void 0===T?void 0:T.buttonBackgroundColor)&&void 0!==P?P:void 0,buttonTextColor:null!==(z=null===(C=e.themes)||void 0===C?void 0:null===(E=C.colorTheme)||void 0===E?void 0:E.buttonTextColor)&&void 0!==z?z:void 0},streamTheme:{backgroundColor:null!==(K=null===(B=e.streamThemes)||void 0===B?void 0:null===(L=B.colorTheme)||void 0===L?void 0:L.backgroundColor)&&void 0!==K?K:void 0,textColor:null!==(Z=null===(_=e.streamThemes)||void 0===_?void 0:null===(R=_.colorTheme)||void 0===R?void 0:R.textColor)&&void 0!==Z?Z:void 0},isLoading:!er&&$<3,unixSecEndTime:es,unixSecStartTime:en},chapters:ev,videoErrorHandler:ef,fallbackMessage:ep,selectedTimestamp:em,vodReady:et,showControls:er,pauseOverlay:ei,initialLang:ek}},_=e=>(0,i.jsx)(l.G,{type:l.x.LivestreamHero,...e}),H=e=>{var t,o;let{fallbackMessage:l,chapters:u,videoErrorHandler:s,selectedTimestamp:d,vodReady:v,showControls:c,pauseOverlay:m,initialLang:g,fcdsHeroLiveStreamProps:f}=R(e);return(0,i.jsx)(_,{...f,fallbackMessageComponent:l?(0,i.jsx)(r.f,{document:l,overrideTextColorClass:"ff-text-white"}):void 0,videoComponent:(null===(t=e.liveStream)||void 0===t?void 0:t.source)&&(null===(o=e.liveStream)||void 0===o?void 0:o.configuration)&&e.videoLabels?(0,i.jsx)(n.U,{provider:a.P.Verizon,videoType:a.Z.Live,videoErrorAction:s,automaticPlay:!0,source:e.liveStream.source,configuration:e.liveStream.configuration,useToken:!!e.liveStream.useToken,videoLabels:e.videoLabels,unixSecStartTime:f.unixSecStartTime,unixSecEndTime:f.unixSecEndTime,chapters:u,tsObj:d,hideControls:!c,vodReady:v,pauseOverlay:m,initialLang:g}):void 0})}},82012:function(e,t,o){"use strict";o.d(t,{A:function(){return i}});let i=e=>"".concat(e,"/agenda")},51248:function(e){e.exports={liveBlogHeroStreamWrapper:"hero-live-stream-wrapper_liveBlogHeroStreamWrapper__c8iQh",liveBlogHeroStreamContainer:"hero-live-stream-wrapper_liveBlogHeroStreamContainer__m7dVM"}}}]);